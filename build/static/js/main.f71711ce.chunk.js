(this.webpackJsonpface_mask_detection_package=this.webpackJsonpface_mask_detection_package||[]).push([[0],{119:function(t,e){},121:function(t,e){},132:function(t,e){},134:function(t,e){},159:function(t,e){},161:function(t,e){},162:function(t,e){},167:function(t,e){},169:function(t,e){},188:function(t,e){},200:function(t,e){},203:function(t,e){},211:function(t,e,n){},212:function(t,e,n){"use strict";n.r(e);var i=n(12),c=n(5),o=n.n(c),r=n(107),a=n.n(r),u=n(27),s=n(108),l=function(t){var e=Object(c.useState)(),n=Object(u.a)(e,2),i=n[0],o=n[1];return Object(c.useEffect)((function(){s.a.load(t).then((function(t){o(t)}))}),[t]),i},f=n(2),d=n.n(f),h=n(54),b=n(9),x=function(t,e){Object(c.useEffect)((function(){navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:{ideal:4096},height:{ideal:2160}}}).then((function(n){t.current.srcObject=n,t.current.onloadedmetadata=function(){e()}}))}),[e,t])},v=function(t){var e=t.getContext("2d"),n=window.devicePixelRatio,i=t.width/n,c=t.height/n;return{setWidth:function(e){i=e,t.style.width=e+"px",t.width=e*n},setHeight:function(e){c=e,t.style.height=e+"px",t.height=e*n},width:i,height:c,clearAll:function(){return e.clearRect(0,0,i*n,c*n)},clearRect:function(t,i,c,o){return e.clearRect(t*n,i*n,c*n,o*n)},setFont:function(t){var i=parseInt(t,10)*n,c=t.replace(/^\d+px/,i+"px");e.font=c},setTextBaseLine:function(t){e.textBaseline=t},setStrokeStyle:function(t){e.strokeStyle=t},setLineWidth:function(t){e.lineWidth=t*n},strokeRect:function(t,i,c,o){return e.strokeRect(t*n,i*n,c*n,o*n)},setFillStyle:function(t){e.fillStyle=t},measureText:function(t){var i=e.measureText(t);return{width:i.width/n,actualBoundingBoxLeft:i.actualBoundingBoxLeft/n,actualBoundingBoxRight:i.actualBoundingBoxRight/n,actualBoundingBoxAscent:i.actualBoundingBoxAscent/n,actualBoundingBoxDescent:i.actualBoundingBoxDescent/n}},fillRect:function(t,i,c,o){return e.fillRect(t*n,i*n,c*n,o*n)},fillText:function(t,i,c){return e.fillText(t,i*n,c*n)}}},g=function(t){var e=(100*t.score).toFixed(1);return"".concat(t.label," ").concat(e,"%")},m=function(t,e){var n="".concat(16,"px 'ibm-plex-sans', Helvetica Neue, Arial, sans-serif");t.setFont(n),t.setTextBaseLine("top");var i=parseInt(n,10);e.forEach((function(e){var n=e.bbox[0],c=e.bbox[1],o=e.bbox[2],r=e.bbox[3],a=g(e);console.log(a),console.log(a.includes("No")),a.includes("No")?(t.setStrokeStyle("#FF0000"),t.setLineWidth(4)):(t.setStrokeStyle("#00FF00"),t.setLineWidth(4)),t.strokeRect(Math.round(n),Math.round(c),Math.round(o),Math.round(r)),a.includes("No")?t.setFillStyle("#FF0000"):t.setFillStyle("#00FF00");var u=t.measureText(a).width;t.fillRect(Math.round(n-2),Math.round(c-(i+8)-6),Math.round(u+16),Math.round(i+8))})),e.forEach((function(e){var n=e.bbox[0],c=e.bbox[1],o=g(e);t.setFillStyle("#ffffff"),t.fillText(o,Math.round(n-2+8),Math.round(c-(i+8)-6+4))}))},p=o.a.memo((function(t){var e=t.model,n=t.onPrediction,o=t.fit,r=t.mirrored,a=t.render,u=Object(c.useRef)(),s=Object(c.useRef)();x(u,(function(){l()}));var l=Object(c.useCallback)(Object(b.a)(d.a.mark((function t(){var i,c,f,b,x,g,p,j,y,B,F,O;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.detect(u.current);case 2:i=t.sent,n&&n(i),c=u.current.offsetWidth,f=u.current.offsetHeight,b=u.current.videoWidth,x=u.current.videoHeight,g=c/b,p=f/x,j="aspectFit"===o?Math.min(g,p):Math.max(g,p),y=(c-b*j)/2,B=(f-x*j)/2,(F=v(s.current)).setWidth(c),F.setHeight(f),F.clearAll(),O=i.map((function(t){var e=t.bbox[0]*j+y,n=t.bbox[1]*j+B,i=t.bbox[2]*j,o=t.bbox[3]*j;return r&&(e=c-e-i),Object(h.a)(Object(h.a)({},t),{},{bbox:[e,n,i,o]})})),(a||m)(F,O),requestAnimationFrame((function(){l()}));case 21:case"end":return t.stop()}}),t)}))),[o,r,e,n,a]);return s.current&&(s.current.style.position="absolute",s.current.style.left="0",s.current.style.top="0"),u.current&&(u.current.style.width="100%",u.current.style.height="100%",u.current.style.objectFit="aspectFit"===o?"contain":"cover",u.current.style.transform=r?"scaleX(-1)":"scaleX(1)"),Object(i.jsxs)("div",{style:{position:"relative"},children:[Object(i.jsx)("video",{autoPlay:!0,playsInline:!0,muted:!0,ref:u}),Object(i.jsx)("canvas",{ref:s})]})})),j=(n(211),function(){var t=l("/model_web");return Object(i.jsx)("div",{className:"fillPage",children:Object(i.jsx)(p,{model:t,fit:"aspectFill",mirrored:!0})})}),y=document.getElementById("root");a.a.render(Object(i.jsx)(j,{}),y)}},[[212,1,2]]]);
//# sourceMappingURL=main.f71711ce.chunk.js.map